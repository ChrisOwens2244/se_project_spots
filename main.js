!function(){"use strict";var e="";function t(e,t,r){!function(e){return e.some((e=>!e.validity.valid))}(e)?(t.disabled=!1,t.classList.remove(r.inactiveButtonClass)):(t.disabled=!0,t.classList.add(r.inactiveButtonClass))}var r=e+"8650253b58b46f0f1c06.svg",o=e+"1ecf96fab54a91c898b4.svg",n=e+"40608da7369d39bc1077.svg",a=e+"d73f076c46eb5467f5fc.svg";const s=new class{constructor(e){this._baseUrl=e.baseUrl,this._headers=e.headers}getAppInfo(){return Promise.all([this.getInitalCards(),this.getUserInfo()])}getInitalCards(){return fetch(`${this._baseUrl}/cards`,{headers:this._headers}).then((e=>{if(e.ok)return e.json();Promise.reject(`Error: ${e.status}`)}))}makeCard(e){let{link:t,name:r,_id:o}=e;return fetch(`${this._baseUrl}/cards`,{method:"POST",headers:this._headers,body:JSON.stringify({link:t,name:r,_id:o})}).then((e=>{if(e.ok)return e.json();Promise.reject(`Error: ${e.status}`)}))}deleteCard(e){let{id:t}=e;return fetch(`${this._baseUrl}/cards/${t}`,{method:"DELETE",headers:this._headers}).then((e=>{if(e.ok)return e.json();Promise.reject(`Error: ${e.status}`)}))}changeLikeStatus(e){let{id:t,isLiked:r}=e;return fetch(`${this._baseUrl}/cards/${t}/likes`,{method:r?"DELETE":"PUT",headers:this._headers}).then((e=>{if(e.ok)return e.json();Promise.reject(`Error: ${e.status}`)}))}getUserInfo(){return fetch(`${this._baseUrl}/users/me`,{headers:this._headers}).then((e=>{if(e.ok)return e.json();Promise.reject(`Error: ${e.status}`)}))}updateProfileInfo(e){let{name:t,about:r}=e;return fetch(`${this._baseUrl}/users/me`,{method:"PATCH",headers:this._headers,body:JSON.stringify({name:t,about:r})}).then((e=>{if(e.ok)return e.json();Promise.reject(`Error: ${e.status}`)}))}updateAvatar(e){let{avatar:t}=e;return fetch(`${this._baseUrl}/users/me/avatar`,{method:"PATCH",headers:this._headers,body:JSON.stringify({avatar:t})}).then((e=>{if(e.ok)return e.json();Promise.reject(`Error: ${e.status}`)}))}}({baseUrl:"https://around-api.en.tripleten-services.com/v1",headers:{authorization:"d11d0e4f-579c-4c1f-9935-38514d3f14dc","Content-Type":"application/json"}}),c=document.getElementById("image-logo"),l=document.getElementById("image-avatar"),d=document.getElementById("image-pen"),i=document.getElementById("image-pen-white"),u=document.getElementById("image-plus");c.src=r,d.src=o,i.src=a,u.src=n;const m=document.querySelector(".profile__edit-btn"),_=document.querySelector("#edit-modal"),f=document.querySelector("#photo-modal"),v=f.querySelector(".modal__photo"),h=f.querySelector(".modal__description"),b=document.forms["edit-profile"],y=b.querySelector(".modal__save-button"),p=b.querySelector("#name"),S=b.querySelector("#description"),E=document.querySelector(".profile__name"),g=document.querySelector(".profile__description");function L(e){e.classList.add("modal_opened"),document.addEventListener("keydown",q)}function k(e){e.classList.remove("modal_opened"),document.removeEventListener("keydown",q)}function q(e){const t=document.querySelector(".modal_opened");"Escape"===e.key&&k(t)}s.getAppInfo().then((e=>{const t=e[0],r=e[1];l.src=r.avatar,l.alt=r.name,E.textContent=r.name,g.textContent=r.about,t.forEach((e=>{const t=P(e);C.append(t)}))})).catch((e=>{console.error(e)})),document.querySelectorAll(".modal").forEach((e=>{e.addEventListener("click",(function(t){t.target.parentElement.classList.contains("page")&&k(e)}))})),document.querySelectorAll(".modal__close-button").forEach((e=>{const t=e.closest(".modal");e.addEventListener("click",(r=>{e.classList.contains("modal__close-button_cancel")&&r.preventDefault(),k(t)}))})),m.addEventListener("click",(()=>{L(_),p.value=E.textContent,S.value=g.textContent,y.disabled=!0,y.classList.add("modal__save-button_disabled")})),b.addEventListener("submit",(function(e){e.preventDefault();const t=p.value,r=S.value;y.textContent="Saving...",s.updateProfileInfo({name:t,about:r}).then((e=>{E.textContent=e.name,g.textContent=e.about})).catch((e=>{console.error(e)})).finally((()=>{k(_),y.textContent="Save"}))}));const C=document.querySelector(".cards__list"),$=document.querySelector("#card");let x,j;function P(e){const t=$.content.cloneNode(!0),r=t.querySelector(".card__button"),o=t.querySelector(".card__delete-button"),n=e.link,a=e.name,c=t.querySelector(".card__image");return c.src=n,c.alt=a,t.querySelector(".card__name").textContent=a,o.addEventListener("click",(t=>{!function(e,t){x=e.target.closest(".card"),j=t,L(H)}(t,e._id)})),e.isLiked&&r.classList.add("card__button_liked"),r.addEventListener("click",(t=>{!function(e,t){const r=e.target.classList.contains("card__button_liked");s.changeLikeStatus({id:t,isLiked:r}).then((()=>{e.target.classList.toggle("card__button_liked")})).catch((e=>{console.error(e)}))}(t,e._id)})),c.addEventListener("click",(()=>{v.src=n,v.alt=a,h.textContent=a,L(f)})),t}const I=document.querySelector(".profile__new-btn"),U=document.querySelector("#add-modal"),A=document.forms["add-post"],B=A.querySelector(".modal__save-button"),D=A.querySelector("#link"),T=A.querySelector("#caption");I.addEventListener("click",(()=>{L(U),B.disabled=!0,B.classList.add("modal__save-button_disabled")})),A.addEventListener("submit",(function(e){e.preventDefault();const t={name:T.value,link:D.value};B.textContent="Saving...",s.makeCard({link:t.link,name:t.name}).then((e=>{C.prepend(P(e))})).catch((e=>{console.error(e)})).finally((()=>{k(U),D.value="",T.value="",B.textContent="Save"}))}));const w=document.querySelector("#avatar-modal"),N=document.forms["avatar-form"],O=N.querySelector(".modal__save-button"),J=N.querySelector("#avatar-pic");document.querySelector(".profile__avatar-btn").addEventListener("click",(()=>{L(w),O.disabled=!0,O.classList.add("modal__save-button_disabled")})),N.addEventListener("submit",(function(e){e.preventDefault();const t=J.value;O.textContent="Saving...",s.updateAvatar({avatar:t}).then((()=>{l.src=t,J.value=""})).catch((e=>{console.error(e)})).finally((()=>{k(w),O.textContent="Save"}))}));const H=document.querySelector("#delete-modal"),z=H.querySelector(".modal__prompt-buttons"),M=z.querySelector(".modal__delete-button");var F;z.addEventListener("submit",(function(e){e.preventDefault(),M.textContent="Deleting...",s.deleteCard({id:j}).then((()=>{x.remove()})).catch((e=>{console.error(e)})).finally((()=>{k(H),M.textContent="Delete"}))})),F={formSelector:".modal__form",inputSelector:".modal__input",submitButtonSelector:".modal__save-button",errorSelector:".modal__error",inactiveButtonClass:"modal__save-button_disabled",inputErrorClass:"modal__input_type_error",errorClass:"modal__error_visiable"},Array.from(document.querySelectorAll(F.formSelector)).forEach((e=>{e.addEventListener("submit",(function(e){e.preventDefault()})),function(e,r){const o=e.querySelector(r.submitButtonSelector),n=Array.from(e.querySelectorAll(r.inputSelector));t(n,o,r),n.forEach((a=>{a.addEventListener("input",(function(){!function(e,t,r){t.validity.valid?function(e,t,r){const o=e.querySelector(`${r.errorSelector}-${t.id}`);t.classList.remove(r.inputErrorClass),o.classList.remove(r.errorClass),o.textContent=""}(e,t,r):function(e,t,r,o){const n=e.querySelector(`${r.errorSelector}-${t.id}`);t.classList.add(r.inputErrorClass),n.textContent=o,n.classList.add(r.errorClass)}(e,t,r,t.validationMessage)}(e,a,r),t(n,o,r)}))}))}(e,F)}))}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LGlCQUFpQixVQUFVLFNBQVVJLEdBQzFDQSxFQUFJd0IsZ0JBQ04sSUFyQkosU0FBMkI2QyxFQUFhekosR0FDdEMsTUFBTUQsRUFBZ0IwSixFQUFZdkYsY0FBY2xFLEVBQU9rSixzQkFDakRwSixFQUFZd0osTUFBTUMsS0FDdEJFLEVBQVlwRCxpQkFBaUJyRyxFQUFPaUosZ0JBR3RDcEosRUFBa0JDLEVBQVdDLEVBQWVDLEdBRTVDRixFQUFVNkYsU0FBU3pGLElBQ2pCQSxFQUFhOEUsaUJBQWlCLFNBQVMsWUF0QzNDLFNBQTRCeUUsRUFBYXZKLEVBQWNGLEdBQ2hERSxFQUFhQyxTQUFTQyxNQVY3QixTQUF3QnFKLEVBQWF2SixFQUFjRixHQUNqRCxNQUFNMEosRUFBZUQsRUFBWXZGLGNBQy9CLEdBQUdsRSxFQUFPbUosaUJBQWlCakosRUFBYXdDLE1BRTFDeEMsRUFBYUssVUFBVUMsT0FBT1IsRUFBT29KLGlCQUNyQ00sRUFBYW5KLFVBQVVDLE9BQU9SLEVBQU9xSixZQUNyQ0ssRUFBYWhFLFlBQWMsRUFDN0IsQ0FXSWlFLENBQWVGLEVBQWF2SixFQUFjRixHQTNCOUMsU0FBd0J5SixFQUFhdkosRUFBY0YsRUFBUTRKLEdBQ3pELE1BQU1GLEVBQWVELEVBQVl2RixjQUMvQixHQUFHbEUsRUFBT21KLGlCQUFpQmpKLEVBQWF3QyxNQUUxQ3hDLEVBQWFLLFVBQVVHLElBQUlWLEVBQU9vSixpQkFDbENNLEVBQWFoRSxZQUFja0UsRUFDM0JGLEVBQWFuSixVQUFVRyxJQUFJVixFQUFPcUosV0FDcEMsQ0FhSVEsQ0FDRUosRUFDQXZKLEVBQ0FGLEVBQ0FFLEVBQWE0SixrQkFLbkIsQ0E0Qk1DLENBQW1CTixFQUFhdkosRUFBY0YsR0FDOUNILEVBQWtCQyxFQUFXQyxFQUFlQyxFQUM5QyxHQUFFLEdBRU4sQ0FRSWdLLENBQWtCUixFQUFReEosRUFBTyxHIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vc2VfcHJvamVjdF9zcG90cy93ZWJwYWNrL2Jvb3RzdHJhcCIsIndlYnBhY2s6Ly9zZV9wcm9qZWN0X3Nwb3RzL3dlYnBhY2svcnVudGltZS9wdWJsaWNQYXRoIiwid2VicGFjazovL3NlX3Byb2plY3Rfc3BvdHMvLi9zcmMvc2NyaXB0cy92YWxpZGF0aW9uLmpzIiwid2VicGFjazovL3NlX3Byb2plY3Rfc3BvdHMvLi9zcmMvdXRpbHMvQXBpLmpzIiwid2VicGFjazovL3NlX3Byb2plY3Rfc3BvdHMvLi9zcmMvcGFnZXMvaW5kZXguanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gVGhlIHJlcXVpcmUgc2NvcGVcbnZhciBfX3dlYnBhY2tfcmVxdWlyZV9fID0ge307XG5cbiIsIl9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiXCI7IiwiLy8gRGVjbGFyaW5nIGEgY29uZmlndXJhdGlvbiBvYmplY3QgdGhhdCBjb250YWlucyB0aGVcbi8vIG5lY2Vzc2FyeSBjbGFzc2VzIGFuZCBzZWxlY3RvcnMuXG5jb25zdCBzZXR0aW5ncyA9IHtcbiAgZm9ybVNlbGVjdG9yOiBcIi5tb2RhbF9fZm9ybVwiLFxuICBpbnB1dFNlbGVjdG9yOiBcIi5tb2RhbF9faW5wdXRcIixcbiAgc3VibWl0QnV0dG9uU2VsZWN0b3I6IFwiLm1vZGFsX19zYXZlLWJ1dHRvblwiLFxuICBlcnJvclNlbGVjdG9yOiBcIi5tb2RhbF9fZXJyb3JcIixcbiAgaW5hY3RpdmVCdXR0b25DbGFzczogXCJtb2RhbF9fc2F2ZS1idXR0b25fZGlzYWJsZWRcIixcbiAgaW5wdXRFcnJvckNsYXNzOiBcIm1vZGFsX19pbnB1dF90eXBlX2Vycm9yXCIsXG4gIGVycm9yQ2xhc3M6IFwibW9kYWxfX2Vycm9yX3Zpc2lhYmxlXCIsXG59O1xuXG5mdW5jdGlvbiBzaG93SW5wdXRFcnJvcihmb3JtRWxlbWVudCwgaW5wdXRFbGVtZW50LCBjb25maWcsIG1lc3NhZ2UpIHtcbiAgY29uc3QgZXJyb3JFbGVtZW50ID0gZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihcbiAgICBgJHtjb25maWcuZXJyb3JTZWxlY3Rvcn0tJHtpbnB1dEVsZW1lbnQuaWR9YFxuICApO1xuICBpbnB1dEVsZW1lbnQuY2xhc3NMaXN0LmFkZChjb25maWcuaW5wdXRFcnJvckNsYXNzKTtcbiAgZXJyb3JFbGVtZW50LnRleHRDb250ZW50ID0gbWVzc2FnZTtcbiAgZXJyb3JFbGVtZW50LmNsYXNzTGlzdC5hZGQoY29uZmlnLmVycm9yQ2xhc3MpO1xufVxuXG5mdW5jdGlvbiBoaWRlSW5wdXRFcnJvcihmb3JtRWxlbWVudCwgaW5wdXRFbGVtZW50LCBjb25maWcpIHtcbiAgY29uc3QgZXJyb3JFbGVtZW50ID0gZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihcbiAgICBgJHtjb25maWcuZXJyb3JTZWxlY3Rvcn0tJHtpbnB1dEVsZW1lbnQuaWR9YFxuICApO1xuICBpbnB1dEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShjb25maWcuaW5wdXRFcnJvckNsYXNzKTtcbiAgZXJyb3JFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoY29uZmlnLmVycm9yQ2xhc3MpO1xuICBlcnJvckVsZW1lbnQudGV4dENvbnRlbnQgPSBcIlwiO1xufVxuXG5mdW5jdGlvbiBjaGVja0lucHV0VmFsaWRpdHkoZm9ybUVsZW1lbnQsIGlucHV0RWxlbWVudCwgY29uZmlnKSB7XG4gIGlmICghaW5wdXRFbGVtZW50LnZhbGlkaXR5LnZhbGlkKSB7XG4gICAgc2hvd0lucHV0RXJyb3IoXG4gICAgICBmb3JtRWxlbWVudCxcbiAgICAgIGlucHV0RWxlbWVudCxcbiAgICAgIGNvbmZpZyxcbiAgICAgIGlucHV0RWxlbWVudC52YWxpZGF0aW9uTWVzc2FnZVxuICAgICk7XG4gIH0gZWxzZSB7XG4gICAgaGlkZUlucHV0RXJyb3IoZm9ybUVsZW1lbnQsIGlucHV0RWxlbWVudCwgY29uZmlnKTtcbiAgfVxufVxuXG5mdW5jdGlvbiBoYXNJbnZhbGlkSW5wdXQoaW5wdXRMaXN0KSB7XG4gIHJldHVybiBpbnB1dExpc3Quc29tZSgoaW5wdXRFbGVtZW50KSA9PiB7XG4gICAgcmV0dXJuICFpbnB1dEVsZW1lbnQudmFsaWRpdHkudmFsaWQ7XG4gIH0pO1xufVxuXG5mdW5jdGlvbiB0b2dnbGVCdXR0b25TdGF0ZShpbnB1dExpc3QsIGJ1dHRvbkVsZW1lbnQsIGNvbmZpZykge1xuICBpZiAoaGFzSW52YWxpZElucHV0KGlucHV0TGlzdCkpIHtcbiAgICBidXR0b25FbGVtZW50LmRpc2FibGVkID0gdHJ1ZTtcbiAgICBidXR0b25FbGVtZW50LmNsYXNzTGlzdC5hZGQoY29uZmlnLmluYWN0aXZlQnV0dG9uQ2xhc3MpO1xuICB9IGVsc2Uge1xuICAgIGJ1dHRvbkVsZW1lbnQuZGlzYWJsZWQgPSBmYWxzZTtcbiAgICBidXR0b25FbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoY29uZmlnLmluYWN0aXZlQnV0dG9uQ2xhc3MpO1xuICB9XG59XG5cbmZ1bmN0aW9uIHNldEV2ZW50TGlzdGVuZXJzKGZvcm1FbGVtZW50LCBjb25maWcpIHtcbiAgY29uc3QgYnV0dG9uRWxlbWVudCA9IGZvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoY29uZmlnLnN1Ym1pdEJ1dHRvblNlbGVjdG9yKTtcbiAgY29uc3QgaW5wdXRMaXN0ID0gQXJyYXkuZnJvbShcbiAgICBmb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKGNvbmZpZy5pbnB1dFNlbGVjdG9yKVxuICApO1xuXG4gIHRvZ2dsZUJ1dHRvblN0YXRlKGlucHV0TGlzdCwgYnV0dG9uRWxlbWVudCwgY29uZmlnKTtcblxuICBpbnB1dExpc3QuZm9yRWFjaCgoaW5wdXRFbGVtZW50KSA9PiB7XG4gICAgaW5wdXRFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJpbnB1dFwiLCBmdW5jdGlvbiAoKSB7XG4gICAgICBjaGVja0lucHV0VmFsaWRpdHkoZm9ybUVsZW1lbnQsIGlucHV0RWxlbWVudCwgY29uZmlnKTtcbiAgICAgIHRvZ2dsZUJ1dHRvblN0YXRlKGlucHV0TGlzdCwgYnV0dG9uRWxlbWVudCwgY29uZmlnKTtcbiAgICB9KTtcbiAgfSk7XG59XG5cbmZ1bmN0aW9uIGVuYWJsZVZhbGlkYXRpb24oY29uZmlnKSB7XG4gIGNvbnN0IGZvcm1MaXN0ID0gQXJyYXkuZnJvbShkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKGNvbmZpZy5mb3JtU2VsZWN0b3IpKTtcbiAgZm9ybUxpc3QuZm9yRWFjaCgoZm9ybUVsKSA9PiB7XG4gICAgZm9ybUVsLmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgZnVuY3Rpb24gKGV2dCkge1xuICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XG4gICAgfSk7XG4gICAgc2V0RXZlbnRMaXN0ZW5lcnMoZm9ybUVsLCBjb25maWcpO1xuICB9KTtcbn1cblxuLy9lbmFibGVWYWxpZGF0aW9uKHNldHRpbmdzKTtcbmV4cG9ydCB7IGVuYWJsZVZhbGlkYXRpb24sIHNldHRpbmdzIH07XG4iLCJjbGFzcyBBcGkge1xuICBjb25zdHJ1Y3RvcihvcHRpb25zKSB7XG4gICAgdGhpcy5fYmFzZVVybCA9IG9wdGlvbnMuYmFzZVVybDtcbiAgICB0aGlzLl9oZWFkZXJzID0gb3B0aW9ucy5oZWFkZXJzO1xuICB9XG5cbiAgZ2V0QXBwSW5mbygpIHtcbiAgICByZXR1cm4gUHJvbWlzZS5hbGwoW3RoaXMuZ2V0SW5pdGFsQ2FyZHMoKSwgdGhpcy5nZXRVc2VySW5mbygpXSk7XG4gIH1cblxuICBnZXRJbml0YWxDYXJkcygpIHtcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vY2FyZHNgLCB7XG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxuICAgIH0pLnRoZW4oKHJlcykgPT4ge1xuICAgICAgaWYgKHJlcy5vaykge1xuICAgICAgICByZXR1cm4gcmVzLmpzb24oKTtcbiAgICAgIH1cbiAgICAgIFByb21pc2UucmVqZWN0KGBFcnJvcjogJHtyZXMuc3RhdHVzfWApO1xuICAgIH0pO1xuICB9XG5cbiAgbWFrZUNhcmQoeyBsaW5rLCBuYW1lLCBfaWQgfSkge1xuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS9jYXJkc2AsIHtcbiAgICAgIG1ldGhvZDogXCJQT1NUXCIsXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoeyBsaW5rLCBuYW1lLCBfaWQgfSksXG4gICAgfSkudGhlbigocmVzKSA9PiB7XG4gICAgICBpZiAocmVzLm9rKSB7XG4gICAgICAgIHJldHVybiByZXMuanNvbigpO1xuICAgICAgfVxuICAgICAgUHJvbWlzZS5yZWplY3QoYEVycm9yOiAke3Jlcy5zdGF0dXN9YCk7XG4gICAgfSk7XG4gIH1cblxuICBkZWxldGVDYXJkKHsgaWQgfSkge1xuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS9jYXJkcy8ke2lkfWAsIHtcbiAgICAgIG1ldGhvZDogXCJERUxFVEVcIixcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXG4gICAgfSkudGhlbigocmVzKSA9PiB7XG4gICAgICBpZiAocmVzLm9rKSB7XG4gICAgICAgIHJldHVybiByZXMuanNvbigpO1xuICAgICAgfVxuICAgICAgUHJvbWlzZS5yZWplY3QoYEVycm9yOiAke3Jlcy5zdGF0dXN9YCk7XG4gICAgfSk7XG4gIH1cblxuICBjaGFuZ2VMaWtlU3RhdHVzKHsgaWQsIGlzTGlrZWQgfSkge1xuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS9jYXJkcy8ke2lkfS9saWtlc2AsIHtcbiAgICAgIG1ldGhvZDogaXNMaWtlZCA/IFwiREVMRVRFXCIgOiBcIlBVVFwiLFxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcbiAgICB9KS50aGVuKChyZXMpID0+IHtcbiAgICAgIGlmIChyZXMub2spIHtcbiAgICAgICAgcmV0dXJuIHJlcy5qc29uKCk7XG4gICAgICB9XG4gICAgICBQcm9taXNlLnJlamVjdChgRXJyb3I6ICR7cmVzLnN0YXR1c31gKTtcbiAgICB9KTtcbiAgfVxuXG4gIGdldFVzZXJJbmZvKCkge1xuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS91c2Vycy9tZWAsIHtcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXG4gICAgfSkudGhlbigocmVzKSA9PiB7XG4gICAgICBpZiAocmVzLm9rKSB7XG4gICAgICAgIHJldHVybiByZXMuanNvbigpO1xuICAgICAgfVxuICAgICAgUHJvbWlzZS5yZWplY3QoYEVycm9yOiAke3Jlcy5zdGF0dXN9YCk7XG4gICAgfSk7XG4gIH1cblxuICB1cGRhdGVQcm9maWxlSW5mbyh7IG5hbWUsIGFib3V0IH0pIHtcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vdXNlcnMvbWVgLCB7XG4gICAgICBtZXRob2Q6IFwiUEFUQ0hcIixcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgIG5hbWUsXG4gICAgICAgIGFib3V0LFxuICAgICAgfSksXG4gICAgfSkudGhlbigocmVzKSA9PiB7XG4gICAgICBpZiAocmVzLm9rKSB7XG4gICAgICAgIHJldHVybiByZXMuanNvbigpO1xuICAgICAgfVxuICAgICAgUHJvbWlzZS5yZWplY3QoYEVycm9yOiAke3Jlcy5zdGF0dXN9YCk7XG4gICAgfSk7XG4gIH1cblxuICB1cGRhdGVBdmF0YXIoeyBhdmF0YXIgfSkge1xuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS91c2Vycy9tZS9hdmF0YXJgLCB7XG4gICAgICBtZXRob2Q6IFwiUEFUQ0hcIixcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7IGF2YXRhciB9KSxcbiAgICB9KS50aGVuKChyZXMpID0+IHtcbiAgICAgIGlmIChyZXMub2spIHtcbiAgICAgICAgcmV0dXJuIHJlcy5qc29uKCk7XG4gICAgICB9XG4gICAgICBQcm9taXNlLnJlamVjdChgRXJyb3I6ICR7cmVzLnN0YXR1c31gKTtcbiAgICB9KTtcbiAgfVxufVxuZXhwb3J0IGRlZmF1bHQgQXBpO1xuIiwiaW1wb3J0IHsgZW5hYmxlVmFsaWRhdGlvbiwgc2V0dGluZ3MgfSBmcm9tIFwiLi4vc2NyaXB0cy92YWxpZGF0aW9uLmpzXCI7XG5pbXBvcnQgXCIuL2luZGV4LmNzc1wiO1xuLy9pbXBvcnQgaW5pdGlhbENhcmRzIGZyb20gXCIuLi91dGlscy9jb25zdGFudHMuanNcIjtcbmltcG9ydCBBcGkgZnJvbSBcIi4uL3V0aWxzL0FwaS5qc1wiO1xuXG5pbXBvcnQgbG9nb1NyYyBmcm9tIFwiLi4vaW1hZ2VzL0xvZ28uc3ZnXCI7XG4vL2ltcG9ydCBhdmF0YXJTcmMgZnJvbSBcIi4uL2ltYWdlcy9hdmF0YXIuanBnXCI7XG5pbXBvcnQgcGVuU3JjIGZyb20gXCIuLi9pbWFnZXMvcGVuLnN2Z1wiO1xuaW1wb3J0IHBsdXNTcmMgZnJvbSBcIi4uL2ltYWdlcy9wbHVzLnN2Z1wiO1xuaW1wb3J0IHBlbldoaXRlU3JjIGZyb20gXCIuLi9pbWFnZXMvcGVuLXdoaXRlLnN2Z1wiO1xuXG5jb25zdCBhcGkgPSBuZXcgQXBpKHtcbiAgYmFzZVVybDogXCJodHRwczovL2Fyb3VuZC1hcGkuZW4udHJpcGxldGVuLXNlcnZpY2VzLmNvbS92MVwiLFxuICBoZWFkZXJzOiB7XG4gICAgYXV0aG9yaXphdGlvbjogXCJkMTFkMGU0Zi01NzljLTRjMWYtOTkzNS0zODUxNGQzZjE0ZGNcIixcbiAgICBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIixcbiAgfSxcbn0pO1xuXG5jb25zdCBpbWFnZUxvZ28gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImltYWdlLWxvZ29cIik7XG5jb25zdCBpbWFnZUF2YXRhciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiaW1hZ2UtYXZhdGFyXCIpO1xuY29uc3QgaW1hZ2VQZW5CbGFjayA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiaW1hZ2UtcGVuXCIpO1xuY29uc3QgaW1hZ2VQZW5XaGl0ZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiaW1hZ2UtcGVuLXdoaXRlXCIpO1xuY29uc3QgaW1hZ2VQbHVzID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJpbWFnZS1wbHVzXCIpO1xuXG5pbWFnZUxvZ28uc3JjID0gbG9nb1NyYztcbmltYWdlUGVuQmxhY2suc3JjID0gcGVuU3JjO1xuaW1hZ2VQZW5XaGl0ZS5zcmMgPSBwZW5XaGl0ZVNyYztcbmltYWdlUGx1cy5zcmMgPSBwbHVzU3JjO1xuXG5jb25zdCBwcm9maWxlRWRpdEJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fZWRpdC1idG5cIik7XG5jb25zdCBlZGl0TW9kYWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2VkaXQtbW9kYWxcIik7XG5cbmNvbnN0IHBob3RvTW9kYWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3Bob3RvLW1vZGFsXCIpO1xuY29uc3QgcGhvdG9Nb2RhbEltYWdlID0gcGhvdG9Nb2RhbC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19waG90b1wiKTtcbmNvbnN0IHBob3RvTW9kYWxDYXB0aW9uID0gcGhvdG9Nb2RhbC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19kZXNjcmlwdGlvblwiKTtcblxuY29uc3QgcHJvZmlsZUZvcm1FbGVtZW50ID0gZG9jdW1lbnQuZm9ybXNbXCJlZGl0LXByb2ZpbGVcIl07XG5jb25zdCBwcm9maWxlU2F2ZUJ0biA9IHByb2ZpbGVGb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19zYXZlLWJ1dHRvblwiKTtcblxuY29uc3QgbmFtZUlucHV0ID0gcHJvZmlsZUZvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjbmFtZVwiKTtcbmNvbnN0IGpvYklucHV0ID0gcHJvZmlsZUZvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjZGVzY3JpcHRpb25cIik7XG5cbmNvbnN0IHByb2ZpbGVOYW1lRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fbmFtZVwiKTtcbmNvbnN0IHByb2ZpbGVKb2JFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19kZXNjcmlwdGlvblwiKTtcblxuYXBpXG4gIC5nZXRBcHBJbmZvKClcbiAgLnRoZW4oKHJlc3VsdCkgPT4ge1xuICAgIGNvbnN0IHNhdmVkQ2FyZHMgPSByZXN1bHRbMF07XG4gICAgY29uc3Qgc2F2ZWRQcm9maWxlID0gcmVzdWx0WzFdO1xuICAgIGltYWdlQXZhdGFyLnNyYyA9IHNhdmVkUHJvZmlsZVtcImF2YXRhclwiXTtcbiAgICBpbWFnZUF2YXRhci5hbHQgPSBzYXZlZFByb2ZpbGVbXCJuYW1lXCJdO1xuICAgIHByb2ZpbGVOYW1lRWxlbWVudC50ZXh0Q29udGVudCA9IHNhdmVkUHJvZmlsZVtcIm5hbWVcIl07XG4gICAgcHJvZmlsZUpvYkVsZW1lbnQudGV4dENvbnRlbnQgPSBzYXZlZFByb2ZpbGVbXCJhYm91dFwiXTtcbiAgICBzYXZlZENhcmRzLmZvckVhY2goKGNhcmQpID0+IHtcbiAgICAgIGNvbnN0IGNhcmRFbCA9IGdldENhcmRFbGVtZW50cyhjYXJkKTtcbiAgICAgIGNhcmRzTGlzdC5hcHBlbmQoY2FyZEVsKTtcbiAgICB9KTtcbiAgfSlcbiAgLmNhdGNoKChlcnIpID0+IHtcbiAgICBjb25zb2xlLmVycm9yKGVycik7XG4gIH0pO1xuXG5mdW5jdGlvbiBvcGVuTW9kYWwobW9kYWwpIHtcbiAgbW9kYWwuY2xhc3NMaXN0LmFkZChcIm1vZGFsX29wZW5lZFwiKTtcbiAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgZXNjYXBlTGlzdGVuZXIpO1xufVxuXG5mdW5jdGlvbiBjbG9zZU1vZGFsKG1vZGFsKSB7XG4gIG1vZGFsLmNsYXNzTGlzdC5yZW1vdmUoXCJtb2RhbF9vcGVuZWRcIik7XG4gIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIGVzY2FwZUxpc3RlbmVyKTtcbn1cblxuZnVuY3Rpb24gZXNjYXBlTGlzdGVuZXIoZXZ0KSB7XG4gIGNvbnN0IG1vZGFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9vcGVuZWRcIik7XG4gIGlmIChldnQua2V5ID09PSBcIkVzY2FwZVwiKSB7XG4gICAgY2xvc2VNb2RhbChtb2RhbCk7XG4gIH1cbn1cblxuY29uc3QgbW9kYWxMaXN0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5tb2RhbFwiKTtcbm1vZGFsTGlzdC5mb3JFYWNoKChtb2RhbCkgPT4ge1xuICBtb2RhbC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZnVuY3Rpb24gKGV2dCkge1xuICAgIGlmIChldnQudGFyZ2V0LnBhcmVudEVsZW1lbnQuY2xhc3NMaXN0LmNvbnRhaW5zKFwicGFnZVwiKSkge1xuICAgICAgY2xvc2VNb2RhbChtb2RhbCk7XG4gICAgfVxuICB9KTtcbn0pO1xuXG5jb25zdCBjbG9zZUJ1dHRvbnMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLm1vZGFsX19jbG9zZS1idXR0b25cIik7XG5jbG9zZUJ1dHRvbnMuZm9yRWFjaCgoYnV0dG9uKSA9PiB7XG4gIGNvbnN0IHBvcHVwID0gYnV0dG9uLmNsb3Nlc3QoXCIubW9kYWxcIik7XG4gIGJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGV2dCkgPT4ge1xuICAgIGlmIChidXR0b24uY2xhc3NMaXN0LmNvbnRhaW5zKFwibW9kYWxfX2Nsb3NlLWJ1dHRvbl9jYW5jZWxcIikpIHtcbiAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIH1cbiAgICBjbG9zZU1vZGFsKHBvcHVwKTtcbiAgfSk7XG59KTtcblxucHJvZmlsZUVkaXRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgb3Blbk1vZGFsKGVkaXRNb2RhbCk7XG5cbiAgbmFtZUlucHV0LnZhbHVlID0gcHJvZmlsZU5hbWVFbGVtZW50LnRleHRDb250ZW50O1xuICBqb2JJbnB1dC52YWx1ZSA9IHByb2ZpbGVKb2JFbGVtZW50LnRleHRDb250ZW50O1xuXG4gIHByb2ZpbGVTYXZlQnRuLmRpc2FibGVkID0gdHJ1ZTtcbiAgcHJvZmlsZVNhdmVCdG4uY2xhc3NMaXN0LmFkZChcIm1vZGFsX19zYXZlLWJ1dHRvbl9kaXNhYmxlZFwiKTtcbn0pO1xuXG4vLyBUaGUgZm9ybSBzdWJtaXNzaW9uIGhhbmRsZXIuIE5vdGUgdGhhdCBpdHMgbmFtZVxuLy8gc3RhcnRzIHdpdGggYSB2ZXJiIGFuZCBjb25jaXNlbHkgZGVzY3JpYmVzIHdoYXQgaXQgZG9lcy5cbmZ1bmN0aW9uIGhhbmRsZVByb2ZpbGVGb3JtU3VibWl0KGV2dCkge1xuICAvLyBQcmV2ZW50IGRlZmF1bHQgYnJvd3NlciBiZWhhdmlvciwgc2VlIGV4cGxhbmF0aW9uIGJlbG93LlxuICBldnQucHJldmVudERlZmF1bHQoKTtcblxuICBjb25zdCBuZXdOYW1lID0gbmFtZUlucHV0LnZhbHVlO1xuICBjb25zdCBuZXdKb2IgPSBqb2JJbnB1dC52YWx1ZTtcbiAgcHJvZmlsZVNhdmVCdG4udGV4dENvbnRlbnQgPSBcIlNhdmluZy4uLlwiO1xuICBhcGlcbiAgICAudXBkYXRlUHJvZmlsZUluZm8oeyBuYW1lOiBuZXdOYW1lLCBhYm91dDogbmV3Sm9iIH0pXG4gICAgLnRoZW4oKGRhdGEpID0+IHtcbiAgICAgIHByb2ZpbGVOYW1lRWxlbWVudC50ZXh0Q29udGVudCA9IGRhdGFbXCJuYW1lXCJdO1xuICAgICAgcHJvZmlsZUpvYkVsZW1lbnQudGV4dENvbnRlbnQgPSBkYXRhW1wiYWJvdXRcIl07XG4gICAgfSlcbiAgICAuY2F0Y2goKGVycikgPT4ge1xuICAgICAgY29uc29sZS5lcnJvcihlcnIpO1xuICAgIH0pXG4gICAgLmZpbmFsbHkoKCkgPT4ge1xuICAgICAgY2xvc2VNb2RhbChlZGl0TW9kYWwpO1xuICAgICAgcHJvZmlsZVNhdmVCdG4udGV4dENvbnRlbnQgPSBcIlNhdmVcIjtcbiAgICB9KTtcbn1cblxuLy8gQ29ubmVjdCB0aGUgaGFuZGxlciB0byB0aGUgZm9ybSwgc28gaXQgd2lsbCB3YXRjaCBmb3IgdGhlIHN1Ym1pdCBldmVudC5cbnByb2ZpbGVGb3JtRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIGhhbmRsZVByb2ZpbGVGb3JtU3VibWl0KTtcblxuY29uc3QgY2FyZHNMaXN0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkc19fbGlzdFwiKTtcbmNvbnN0IGNhcmRUZW1wbGF0ZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjY2FyZFwiKTtcblxubGV0IHNlbGVjdGVkQ2FyZDtcbmxldCBzZWxlY3RlZENhcmRJZDtcblxuZnVuY3Rpb24gZ2V0Q2FyZEVsZW1lbnRzKGRhdGEpIHtcbiAgY29uc3QgY2FyZEVsZW1lbnQgPSBjYXJkVGVtcGxhdGUuY29udGVudC5jbG9uZU5vZGUodHJ1ZSk7XG4gIGNvbnN0IGxpa2VCdXR0b24gPSBjYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2J1dHRvblwiKTtcbiAgY29uc3QgZGVsZXRlQnV0dG9uID0gY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX19kZWxldGUtYnV0dG9uXCIpO1xuXG4gIGNvbnN0IGNhcmRJbWFnZSA9IGRhdGFbXCJsaW5rXCJdO1xuICBjb25zdCBjYXJkTmFtZSA9IGRhdGFbXCJuYW1lXCJdO1xuICBjb25zdCBjYXJkSW1hZ2VFbGVtZW50ID0gY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX19pbWFnZVwiKTtcblxuICBjYXJkSW1hZ2VFbGVtZW50LnNyYyA9IGNhcmRJbWFnZTtcbiAgY2FyZEltYWdlRWxlbWVudC5hbHQgPSBjYXJkTmFtZTtcbiAgY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX19uYW1lXCIpLnRleHRDb250ZW50ID0gY2FyZE5hbWU7XG5cbiAgZGVsZXRlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoZXZ0KSA9PiB7XG4gICAgaGFuZGxlRGVsZXRlQ2FyZChldnQsIGRhdGFbXCJfaWRcIl0pO1xuICB9KTtcblxuICBpZiAoZGF0YS5pc0xpa2VkKSB7XG4gICAgbGlrZUJ1dHRvbi5jbGFzc0xpc3QuYWRkKFwiY2FyZF9fYnV0dG9uX2xpa2VkXCIpO1xuICB9XG5cbiAgbGlrZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGV2dCkgPT4ge1xuICAgIGhhbmRsZUxpa2UoZXZ0LCBkYXRhW1wiX2lkXCJdKTtcbiAgfSk7XG5cbiAgY2FyZEltYWdlRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgIHBob3RvTW9kYWxJbWFnZS5zcmMgPSBjYXJkSW1hZ2U7XG4gICAgcGhvdG9Nb2RhbEltYWdlLmFsdCA9IGNhcmROYW1lO1xuICAgIHBob3RvTW9kYWxDYXB0aW9uLnRleHRDb250ZW50ID0gY2FyZE5hbWU7XG4gICAgb3Blbk1vZGFsKHBob3RvTW9kYWwpO1xuICB9KTtcbiAgcmV0dXJuIGNhcmRFbGVtZW50O1xufVxuXG5jb25zdCBwb3N0QWRkQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19uZXctYnRuXCIpO1xuY29uc3QgYWRkTW9kYWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2FkZC1tb2RhbFwiKTtcblxuY29uc3QgcG9zdEZvcm1FbGVtZW50ID0gZG9jdW1lbnQuZm9ybXNbXCJhZGQtcG9zdFwiXTtcbmNvbnN0IHBvc3RTYXZlQnRuID0gcG9zdEZvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX3NhdmUtYnV0dG9uXCIpO1xuXG5jb25zdCBsaW5rSW5wdXQgPSBwb3N0Rm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihcIiNsaW5rXCIpO1xuY29uc3QgY2FwdGlvbklucHV0ID0gcG9zdEZvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjY2FwdGlvblwiKTtcblxucG9zdEFkZEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICBvcGVuTW9kYWwoYWRkTW9kYWwpO1xuICBwb3N0U2F2ZUJ0bi5kaXNhYmxlZCA9IHRydWU7XG4gIHBvc3RTYXZlQnRuLmNsYXNzTGlzdC5hZGQoXCJtb2RhbF9fc2F2ZS1idXR0b25fZGlzYWJsZWRcIik7XG59KTtcblxuZnVuY3Rpb24gaGFuZGxlQWRkRm9ybVN1Ym1pdChldnQpIHtcbiAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XG4gIGNvbnN0IG5ld0NhcmQgPSB7XG4gICAgbmFtZTogY2FwdGlvbklucHV0LnZhbHVlLFxuICAgIGxpbms6IGxpbmtJbnB1dC52YWx1ZSxcbiAgfTtcblxuICBwb3N0U2F2ZUJ0bi50ZXh0Q29udGVudCA9IFwiU2F2aW5nLi4uXCI7XG4gIGFwaVxuICAgIC5tYWtlQ2FyZCh7IGxpbms6IG5ld0NhcmQubGluaywgbmFtZTogbmV3Q2FyZC5uYW1lIH0pXG4gICAgLnRoZW4oKHJlcykgPT4ge1xuICAgICAgY2FyZHNMaXN0LnByZXBlbmQoZ2V0Q2FyZEVsZW1lbnRzKHJlcykpO1xuICAgIH0pXG4gICAgLmNhdGNoKChlcnIpID0+IHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoZXJyKTtcbiAgICB9KVxuICAgIC5maW5hbGx5KCgpID0+IHtcbiAgICAgIGNsb3NlTW9kYWwoYWRkTW9kYWwpO1xuICAgICAgbGlua0lucHV0LnZhbHVlID0gXCJcIjtcbiAgICAgIGNhcHRpb25JbnB1dC52YWx1ZSA9IFwiXCI7XG4gICAgICBwb3N0U2F2ZUJ0bi50ZXh0Q29udGVudCA9IFwiU2F2ZVwiO1xuICAgIH0pO1xufVxucG9zdEZvcm1FbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgaGFuZGxlQWRkRm9ybVN1Ym1pdCk7XG5cbmNvbnN0IGVkaXRBdmF0YXJNb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjYXZhdGFyLW1vZGFsXCIpO1xuY29uc3QgYXZhdGFyRm9ybSA9IGRvY3VtZW50LmZvcm1zW1wiYXZhdGFyLWZvcm1cIl07XG5jb25zdCBhdmF0YXJTYXZlQnRuID0gYXZhdGFyRm9ybS5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19zYXZlLWJ1dHRvblwiKTtcbmNvbnN0IGF2YXRhcklucHV0ID0gYXZhdGFyRm9ybS5xdWVyeVNlbGVjdG9yKFwiI2F2YXRhci1waWNcIik7XG5jb25zdCBhdmF0YXJCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2F2YXRhci1idG5cIik7XG5hdmF0YXJCdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgb3Blbk1vZGFsKGVkaXRBdmF0YXJNb2RhbCk7XG4gIGF2YXRhclNhdmVCdG4uZGlzYWJsZWQgPSB0cnVlO1xuICBhdmF0YXJTYXZlQnRuLmNsYXNzTGlzdC5hZGQoXCJtb2RhbF9fc2F2ZS1idXR0b25fZGlzYWJsZWRcIik7XG59KTtcblxuZnVuY3Rpb24gaGFuZGxlQXZhdGFyU3VibWl0KGV2dCkge1xuICBldnQucHJldmVudERlZmF1bHQoKTtcbiAgY29uc3QgbmV3QXZhdGFyID0gYXZhdGFySW5wdXQudmFsdWU7XG4gIGF2YXRhclNhdmVCdG4udGV4dENvbnRlbnQgPSBcIlNhdmluZy4uLlwiO1xuICBhcGlcbiAgICAudXBkYXRlQXZhdGFyKHsgYXZhdGFyOiBuZXdBdmF0YXIgfSlcbiAgICAudGhlbigoKSA9PiB7XG4gICAgICBpbWFnZUF2YXRhci5zcmMgPSBuZXdBdmF0YXI7XG5cbiAgICAgIGF2YXRhcklucHV0LnZhbHVlID0gXCJcIjtcbiAgICB9KVxuICAgIC5jYXRjaCgoZXJyKSA9PiB7XG4gICAgICBjb25zb2xlLmVycm9yKGVycik7XG4gICAgfSlcbiAgICAuZmluYWxseSgoKSA9PiB7XG4gICAgICBjbG9zZU1vZGFsKGVkaXRBdmF0YXJNb2RhbCk7XG4gICAgICBhdmF0YXJTYXZlQnRuLnRleHRDb250ZW50ID0gXCJTYXZlXCI7XG4gICAgfSk7XG59XG5hdmF0YXJGb3JtLmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgaGFuZGxlQXZhdGFyU3VibWl0KTtcbmNvbnN0IGRlbGV0ZU1vZGFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNkZWxldGUtbW9kYWxcIik7XG5jb25zdCBkZWxldGVGb3JtID0gZGVsZXRlTW9kYWwucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fcHJvbXB0LWJ1dHRvbnNcIik7XG5jb25zdCBkZWxldGVCdXR0b24gPSBkZWxldGVGb3JtLnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2RlbGV0ZS1idXR0b25cIik7XG5cbmZ1bmN0aW9uIGhhbmRsZURlbGV0ZUNhcmQoZXZ0LCBpZCkge1xuICBzZWxlY3RlZENhcmQgPSBldnQudGFyZ2V0LmNsb3Nlc3QoXCIuY2FyZFwiKTtcbiAgc2VsZWN0ZWRDYXJkSWQgPSBpZDtcbiAgLy9jb25zb2xlLmxvZyhzZWxlY3RlZENhcmRJZCk7XG4gIG9wZW5Nb2RhbChkZWxldGVNb2RhbCk7XG59XG5cbmZ1bmN0aW9uIGhhbmRsZURlbGV0ZVN1Ym1pdChldnQpIHtcbiAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XG4gIGRlbGV0ZUJ1dHRvbi50ZXh0Q29udGVudCA9IFwiRGVsZXRpbmcuLi5cIjtcbiAgYXBpXG4gICAgLmRlbGV0ZUNhcmQoeyBpZDogc2VsZWN0ZWRDYXJkSWQgfSlcbiAgICAudGhlbigoKSA9PiB7XG4gICAgICBzZWxlY3RlZENhcmQucmVtb3ZlKCk7XG4gICAgfSlcbiAgICAuY2F0Y2goKGVycikgPT4ge1xuICAgICAgY29uc29sZS5lcnJvcihlcnIpO1xuICAgIH0pXG4gICAgLmZpbmFsbHkoKCkgPT4ge1xuICAgICAgY2xvc2VNb2RhbChkZWxldGVNb2RhbCk7XG4gICAgICBkZWxldGVCdXR0b24udGV4dENvbnRlbnQgPSBcIkRlbGV0ZVwiO1xuICAgIH0pO1xufVxuXG5kZWxldGVGb3JtLmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgaGFuZGxlRGVsZXRlU3VibWl0KTtcblxuZnVuY3Rpb24gaGFuZGxlTGlrZShldnQsIGlkKSB7XG4gIGNvbnN0IGxpa2VkID0gZXZ0LnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoXCJjYXJkX19idXR0b25fbGlrZWRcIik7XG4gIGFwaVxuICAgIC5jaGFuZ2VMaWtlU3RhdHVzKHsgaWQ6IGlkLCBpc0xpa2VkOiBsaWtlZCB9KVxuICAgIC50aGVuKCgpID0+IHtcbiAgICAgIGV2dC50YXJnZXQuY2xhc3NMaXN0LnRvZ2dsZShcImNhcmRfX2J1dHRvbl9saWtlZFwiKTtcbiAgICB9KVxuICAgIC5jYXRjaCgoZXJyKSA9PiB7XG4gICAgICBjb25zb2xlLmVycm9yKGVycik7XG4gICAgfSk7XG59XG5lbmFibGVWYWxpZGF0aW9uKHNldHRpbmdzKTtcbiJdLCJuYW1lcyI6WyJfX3dlYnBhY2tfcmVxdWlyZV9fIiwidG9nZ2xlQnV0dG9uU3RhdGUiLCJpbnB1dExpc3QiLCJidXR0b25FbGVtZW50IiwiY29uZmlnIiwic29tZSIsImlucHV0RWxlbWVudCIsInZhbGlkaXR5IiwidmFsaWQiLCJoYXNJbnZhbGlkSW5wdXQiLCJkaXNhYmxlZCIsImNsYXNzTGlzdCIsInJlbW92ZSIsImluYWN0aXZlQnV0dG9uQ2xhc3MiLCJhZGQiLCJhcGkiLCJjb25zdHJ1Y3RvciIsIm9wdGlvbnMiLCJ0aGlzIiwiX2Jhc2VVcmwiLCJiYXNlVXJsIiwiX2hlYWRlcnMiLCJoZWFkZXJzIiwiZ2V0QXBwSW5mbyIsIlByb21pc2UiLCJhbGwiLCJnZXRJbml0YWxDYXJkcyIsImdldFVzZXJJbmZvIiwiZmV0Y2giLCJ0aGVuIiwicmVzIiwib2siLCJqc29uIiwicmVqZWN0Iiwic3RhdHVzIiwibWFrZUNhcmQiLCJfcmVmIiwibGluayIsIm5hbWUiLCJfaWQiLCJtZXRob2QiLCJib2R5IiwiSlNPTiIsInN0cmluZ2lmeSIsImRlbGV0ZUNhcmQiLCJfcmVmMiIsImlkIiwiY2hhbmdlTGlrZVN0YXR1cyIsIl9yZWYzIiwiaXNMaWtlZCIsInVwZGF0ZVByb2ZpbGVJbmZvIiwiX3JlZjQiLCJhYm91dCIsInVwZGF0ZUF2YXRhciIsIl9yZWY1IiwiYXZhdGFyIiwiYXV0aG9yaXphdGlvbiIsImltYWdlTG9nbyIsImRvY3VtZW50IiwiZ2V0RWxlbWVudEJ5SWQiLCJpbWFnZUF2YXRhciIsImltYWdlUGVuQmxhY2siLCJpbWFnZVBlbldoaXRlIiwiaW1hZ2VQbHVzIiwic3JjIiwibG9nb1NyYyIsInBlblNyYyIsInBlbldoaXRlU3JjIiwicGx1c1NyYyIsInByb2ZpbGVFZGl0QnV0dG9uIiwicXVlcnlTZWxlY3RvciIsImVkaXRNb2RhbCIsInBob3RvTW9kYWwiLCJwaG90b01vZGFsSW1hZ2UiLCJwaG90b01vZGFsQ2FwdGlvbiIsInByb2ZpbGVGb3JtRWxlbWVudCIsImZvcm1zIiwicHJvZmlsZVNhdmVCdG4iLCJuYW1lSW5wdXQiLCJqb2JJbnB1dCIsInByb2ZpbGVOYW1lRWxlbWVudCIsInByb2ZpbGVKb2JFbGVtZW50Iiwib3Blbk1vZGFsIiwibW9kYWwiLCJhZGRFdmVudExpc3RlbmVyIiwiZXNjYXBlTGlzdGVuZXIiLCJjbG9zZU1vZGFsIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsImV2dCIsImtleSIsInJlc3VsdCIsInNhdmVkQ2FyZHMiLCJzYXZlZFByb2ZpbGUiLCJhbHQiLCJ0ZXh0Q29udGVudCIsImZvckVhY2giLCJjYXJkIiwiY2FyZEVsIiwiZ2V0Q2FyZEVsZW1lbnRzIiwiY2FyZHNMaXN0IiwiYXBwZW5kIiwiY2F0Y2giLCJlcnIiLCJjb25zb2xlIiwiZXJyb3IiLCJxdWVyeVNlbGVjdG9yQWxsIiwidGFyZ2V0IiwicGFyZW50RWxlbWVudCIsImNvbnRhaW5zIiwiYnV0dG9uIiwicG9wdXAiLCJjbG9zZXN0IiwicHJldmVudERlZmF1bHQiLCJ2YWx1ZSIsIm5ld05hbWUiLCJuZXdKb2IiLCJkYXRhIiwiZmluYWxseSIsImNhcmRUZW1wbGF0ZSIsInNlbGVjdGVkQ2FyZCIsInNlbGVjdGVkQ2FyZElkIiwiY2FyZEVsZW1lbnQiLCJjb250ZW50IiwiY2xvbmVOb2RlIiwibGlrZUJ1dHRvbiIsImRlbGV0ZUJ1dHRvbiIsImNhcmRJbWFnZSIsImNhcmROYW1lIiwiY2FyZEltYWdlRWxlbWVudCIsImRlbGV0ZU1vZGFsIiwiaGFuZGxlRGVsZXRlQ2FyZCIsImxpa2VkIiwidG9nZ2xlIiwiaGFuZGxlTGlrZSIsInBvc3RBZGRCdXR0b24iLCJhZGRNb2RhbCIsInBvc3RGb3JtRWxlbWVudCIsInBvc3RTYXZlQnRuIiwibGlua0lucHV0IiwiY2FwdGlvbklucHV0IiwibmV3Q2FyZCIsInByZXBlbmQiLCJlZGl0QXZhdGFyTW9kYWwiLCJhdmF0YXJGb3JtIiwiYXZhdGFyU2F2ZUJ0biIsImF2YXRhcklucHV0IiwibmV3QXZhdGFyIiwiZGVsZXRlRm9ybSIsImZvcm1TZWxlY3RvciIsImlucHV0U2VsZWN0b3IiLCJzdWJtaXRCdXR0b25TZWxlY3RvciIsImVycm9yU2VsZWN0b3IiLCJpbnB1dEVycm9yQ2xhc3MiLCJlcnJvckNsYXNzIiwiQXJyYXkiLCJmcm9tIiwiZm9ybUVsIiwiZm9ybUVsZW1lbnQiLCJlcnJvckVsZW1lbnQiLCJoaWRlSW5wdXRFcnJvciIsIm1lc3NhZ2UiLCJzaG93SW5wdXRFcnJvciIsInZhbGlkYXRpb25NZXNzYWdlIiwiY2hlY2tJbnB1dFZhbGlkaXR5Iiwic2V0RXZlbnRMaXN0ZW5lcnMiXSwic291cmNlUm9vdCI6IiJ9